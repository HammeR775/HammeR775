<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HammeR.MC | Professional Cubemap Converter</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #ff8a00;
            --primary-dark: #e67a00;
            --primary-light: #ffa733;
            --secondary: #4285f4;
            --secondary-dark: #3367d6;
            --danger: #ea4335;
            --success: #34a853;
            --dark: #1a1a2e;
            --darker: #0f0f1a;
            --light: #f8f9fa;
            --gray: #6c757d;
            --card-bg: rgba(30, 30, 46, 0.8);
            --card-border: rgba(255, 138, 0, 0.3);
            --card-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
        }
        
        body {
            background: linear-gradient(135deg, var(--darker), var(--dark));
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 138, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(66, 133, 244, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(52, 168, 83, 0.05) 0%, transparent 50%);
            z-index: -1;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: rgba(26, 26, 46, 0.7);
            border-radius: 24px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--card-border);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 24px 24px 0 0;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            padding: 20px 0;
        }
        
        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            gap: 20px;
        }
        
        .logo-main {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .logo-icon {
            position: relative;
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 24px;
            box-shadow: 0 10px 30px rgba(255, 138, 0, 0.4);
            transition: transform 0.3s ease;
        }
        
        .logo-icon:hover {
            transform: rotate(5deg) scale(1.05);
        }
        
        .logo-icon i {
            font-size: 4rem;
            color: white;
            filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.3));
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        h1 {
            font-size: 3.5rem;
            margin-bottom: 5px;
            background: linear-gradient(to right, var(--primary), var(--primary-light), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            font-weight: 800;
            letter-spacing: -1px;
        }
        
        .brand {
            color: var(--primary);
            font-weight: bold;
        }
        
        .subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-top: 10px;
            color: #adb5bd;
            max-width: 600px;
            line-height: 1.6;
        }
        
        .devices-showcase {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .device {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            transition: transform 0.3s ease;
        }
        
        .device:hover {
            transform: translateY(-5px);
        }
        
        .device-icon {
            font-size: 2.5rem;
            color: var(--primary);
            background: rgba(255, 138, 0, 0.1);
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 16px;
            border: 1px solid rgba(255, 138, 0, 0.3);
        }
        
        .device-name {
            font-size: 0.9rem;
            color: #adb5bd;
        }
        
        .upload-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            text-align: center;
            border: 2px dashed rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
            backdrop-filter: blur(5px);
            position: relative;
            overflow: hidden;
        }
        
        .upload-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 138, 0, 0.05), rgba(66, 133, 244, 0.05));
            z-index: -1;
        }
        
        .upload-section:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 138, 0, 0.5);
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .upload-area {
            margin: 30px 0;
        }
        
        .file-input {
            display: none;
        }
        
        .upload-btn {
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 18px 45px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 25px rgba(255, 138, 0, 0.4);
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }
        
        .upload-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        
        .upload-btn:hover::before {
            left: 100%;
        }
        
        .upload-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(255, 138, 0, 0.6);
        }
        
        .upload-btn:active {
            transform: translateY(-2px);
        }
        
        .settings-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
        }
        
        .settings-title {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.8rem;
            color: var(--primary);
            position: relative;
            display: inline-block;
            left: 50%;
            transform: translateX(-50%);
            padding-bottom: 10px;
        }
        
        .settings-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, var(--primary), transparent);
            border-radius: 3px;
        }
        
        .quality-settings {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .quality-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 25px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 180px;
            max-width: 250px;
            position: relative;
            overflow: hidden;
        }
        
        .quality-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--primary);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .quality-option:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 138, 0, 0.5);
            transform: translateY(-5px);
        }
        
        .quality-option.active {
            background: rgba(255, 138, 0, 0.15);
            border-color: var(--primary);
            box-shadow: 0 10px 25px rgba(255, 138, 0, 0.3);
        }
        
        .quality-option.active::before {
            transform: scaleX(1);
        }
        
        .quality-option h3 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1.3rem;
        }
        
        .quality-option p {
            font-size: 1rem;
            color: #adb5bd;
            margin-bottom: 15px;
        }
        
        .quality-badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }
        
        .custom-quality {
            display: none;
            margin-top: 30px;
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .custom-input {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .custom-input input {
            width: 120px;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .custom-input input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(255, 138, 0, 0.3);
        }
        
        .custom-input span {
            color: #adb5bd;
            font-size: 1.2rem;
        }
        
        .file-size-info {
            text-align: center;
            margin-top: 20px;
            color: #adb5bd;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }
        
        .preview-section {
            display: none;
            margin-bottom: 40px;
        }
        
        .preview-title {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.2rem;
            color: var(--primary);
            position: relative;
            padding-bottom: 15px;
        }
        
        .preview-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 4px;
        }
        
        .preview-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .preview-box {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 25px;
            width: calc(33.333% - 25px);
            min-width: 280px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            position: relative;
            overflow: hidden;
        }
        
        .preview-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 138, 0, 0.05), rgba(66, 133, 244, 0.05));
            z-index: -1;
        }
        
        .preview-box:hover {
            transform: translateY(-8px);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 138, 0, 0.3);
        }
        
        .preview-box h3 {
            margin-bottom: 20px;
            font-size: 1.4rem;
            color: var(--primary);
            font-weight: 600;
        }
        
        .preview-canvas {
            width: 100%;
            background-color: #000;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 20px;
            transition: all 0.3s;
        }
        
        .preview-canvas:hover {
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(255, 138, 0, 0.3);
        }
        
        .cube-container {
            width: 100%;
            text-align: center;
            margin-top: 50px;
            padding: 30px;
            background: var(--card-bg);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
        }
        
        .cube-title {
            margin-bottom: 25px;
            font-size: 1.8rem;
            color: var(--primary);
            font-weight: 600;
        }
        
        #threeCanvas {
            background: linear-gradient(135deg, #0a0a1a, #1a1a2e);
            border-radius: 16px;
            max-width: 100%;
            touch-action: none;
            cursor: grab;
            margin: 0 auto;
            display: block;
            border: 2px solid var(--card-border);
            box-shadow: 0 0 30px rgba(255, 138, 0, 0.4);
            transition: all 0.3s;
        }
        
        #threeCanvas:hover {
            box-shadow: 0 0 40px rgba(255, 138, 0, 0.6);
        }
        
        .cube-instruction {
            margin-top: 20px;
            font-style: italic;
            opacity: 0.8;
            color: #adb5bd;
            background: rgba(255, 255, 255, 0.05);
            padding: 12px 20px;
            border-radius: 10px;
            display: inline-block;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 35px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: linear-gradient(to right, var(--secondary), var(--secondary-dark));
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            box-shadow: 0 6px 20px rgba(108, 92, 231, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
            position: relative;
            overflow: hidden;
        }
        
        .control-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        
        .control-btn:hover::before {
            left: 100%;
        }
        
        .control-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(108, 92, 231, 0.5);
        }
        
        .control-btn:active {
            transform: translateY(-2px);
        }
        
        .download-section {
            display: none;
            text-align: center;
            margin-top: 50px;
            padding: 40px;
            background: var(--card-bg);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
        }
        
        .download-options {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 35px 0;
        }
        
        .download-btn {
            background: linear-gradient(to right, #f093fb, #f5576c);
            color: white;
            border: none;
            padding: 18px 32px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 20px rgba(240, 147, 251, 0.4);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }
        
        .download-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        
        .download-btn:hover::before {
            left: 100%;
        }
        
        .download-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(240, 147, 251, 0.5);
        }
        
        .download-btn:active {
            transform: translateY(-2px);
        }
        
        .download-btn i {
            font-size: 1.3rem;
        }
        
        .download-all-btn {
            background: linear-gradient(to right, var(--success), #2dd881);
            padding: 20px 40px;
            font-size: 1.2rem;
            box-shadow: 0 6px 20px rgba(67, 233, 123, 0.4);
        }
        
        .download-all-btn:hover {
            box-shadow: 0 10px 25px rgba(67, 233, 123, 0.5);
        }
        
        .instructions {
            margin-top: 50px;
            background: var(--card-bg);
            border-radius: 20px;
            padding: 35px;
            border-left: 5px solid var(--primary);
            backdrop-filter: blur(5px);
            position: relative;
            overflow: hidden;
        }
        
        .instructions::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 138, 0, 0.05), rgba(66, 133, 244, 0.05));
            z-index: -1;
        }
        
        .instructions h2 {
            margin-bottom: 25px;
            text-align: center;
            color: var(--primary);
            font-size: 2rem;
            position: relative;
            display: inline-block;
            left: 50%;
            transform: translateX(-50%);
            padding-bottom: 10px;
        }
        
        .instructions h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, var(--primary), transparent);
            border-radius: 3px;
        }
        
        .instructions ol {
            margin-left: 25px;
            line-height: 1.8;
            counter-reset: instruction-counter;
        }
        
        .instructions li {
            margin-bottom: 18px;
            padding-left: 15px;
            color: #adb5bd;
            position: relative;
            font-size: 1.1rem;
            counter-increment: instruction-counter;
        }
        
        .instructions li::before {
            content: counter(instruction-counter);
            position: absolute;
            left: -35px;
            top: 0;
            width: 30px;
            height: 30px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .instructions li strong {
            color: var(--primary);
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .spinner {
            border: 5px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            border-top: 5px solid var(--primary);
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            opacity: 0.8;
            font-size: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 25px;
            color: #adb5bd;
        }
        
        .feature-highlights {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 50px 0;
            gap: 30px;
        }
        
        .feature {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 35px 25px;
            text-align: center;
            width: calc(33.333% - 30px);
            min-width: 250px;
            border: 1px solid var(--card-border);
            transition: all 0.3s;
            backdrop-filter: blur(5px);
            position: relative;
            overflow: hidden;
        }
        
        .feature::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 138, 0, 0.05), rgba(66, 133, 244, 0.05));
            z-index: -1;
        }
        
        .feature:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(255, 138, 0, 0.2);
            border-color: rgba(255, 138, 0, 0.5);
        }
        
        .feature i {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--primary);
            background: rgba(255, 138, 0, 0.1);
            width: 90px;
            height: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            margin: 0 auto 20px;
            border: 1px solid rgba(255, 138, 0, 0.3);
        }
        
        .feature h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .feature p {
            color: #adb5bd;
            line-height: 1.6;
            font-size: 1.05rem;
        }
        
        /* Notification styles */
        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            color: white;
            padding: 20px 30px;
            border-radius: 12px;
            z-index: 1000;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideInRight 0.4s ease-out;
            max-width: 400px;
            border-left: 5px solid var(--primary-light);
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        .notification i {
            font-size: 1.5rem;
        }
        
        /* Responsive design */
        @media (max-width: 1200px) {
            .preview-box, .feature {
                width: calc(50% - 25px);
            }
            
            #threeCanvas {
                width: 400px;
                height: 400px;
            }
        }
        
        @media (max-width: 992px) {
            .logo-main {
                flex-direction: column;
                text-align: center;
            }
            
            .logo-text {
                align-items: center;
            }
            
            h1 {
                font-size: 3rem;
            }
            
            .devices-showcase {
                gap: 20px;
            }
            
            .device-icon {
                width: 70px;
                height: 70px;
                font-size: 2rem;
            }
        }
        
        @media (max-width: 768px) {
            .preview-box, .feature {
                width: 100%;
                max-width: 400px;
            }
            
            #threeCanvas {
                width: 350px;
                height: 350px;
            }
            
            .download-options {
                flex-direction: column;
                align-items: center;
            }
            
            .download-btn {
                width: 100%;
                max-width: 350px;
                justify-content: center;
            }
            
            .feature-highlights {
                flex-direction: column;
                align-items: center;
            }
            
            .feature {
                width: 100%;
                max-width: 400px;
            }
            
            .quality-settings {
                flex-direction: column;
                align-items: center;
            }
            
            .quality-option {
                max-width: 100%;
                width: 100%;
            }
            
            .container {
                padding: 25px;
            }
            
            .upload-section, .settings-section, .instructions, .download-section {
                padding: 30px 25px;
            }
        }
        
        @media (max-width: 576px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            #threeCanvas {
                width: 300px;
                height: 300px;
            }
            
            .container {
                padding: 20px;
            }
            
            .upload-btn, .control-btn, .download-btn {
                padding: 16px 25px;
                font-size: 1rem;
            }
            
            .devices-showcase {
                gap: 15px;
            }
            
            .device-icon {
                width: 60px;
                height: 60px;
                font-size: 1.8rem;
            }
            
            .device-name {
                font-size: 0.8rem;
            }
            
            .instructions li {
                font-size: 1rem;
            }
        }
        
        @media (max-width: 400px) {
            h1 {
                font-size: 2.2rem;
            }
            
            #threeCanvas {
                width: 260px;
                height: 260px;
            }
            
            .preview-box {
                min-width: 100%;
            }
            
            .upload-btn, .control-btn, .download-btn {
                width: 100%;
                justify-content: center;
            }
        }
        
        /* Floating elements for visual interest */
        .floating-element {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 138, 0, 0.1);
            z-index: -1;
        }
        
        .floating-1 {
            width: 120px;
            height: 120px;
            top: 10%;
            left: 5%;
            animation: float 15s infinite ease-in-out;
        }
        
        .floating-2 {
            width: 80px;
            height: 80px;
            bottom: 15%;
            right: 8%;
            animation: float 12s infinite ease-in-out reverse;
        }
        
        .floating-3 {
            width: 60px;
            height: 60px;
            top: 40%;
            right: 12%;
            animation: float 10s infinite ease-in-out;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
    </style>
</head>
<body>
    <div class="floating-element floating-1"></div>
    <div class="floating-element floating-2"></div>
    <div class="floating-element floating-3"></div>
    
    <div class="container">
        <header>
            <div class="logo-container">
                <div class="logo-main">
                    <div class="logo-icon">
                        <i class="fas fa-cube"></i>
                    </div>
                    <div class="logo-text">
                        <h1>HammeR.<span class="brand">MC</span></h1>
                        <p class="subtitle">Professional Cubemap Converter - Transform panoramas into immersive 3D experiences</p>
                    </div>
                </div>
                
                <div class="devices-showcase">
                    <div class="device">
                        <div class="device-icon">
                            <i class="fas fa-desktop"></i>
                        </div>
                        <div class="device-name">Desktop</div>
                    </div>
                    <div class="device">
                        <div class="device-icon">
                            <i class="fas fa-laptop"></i>
                        </div>
                        <div class="device-name">Laptop</div>
                    </div>
                    <div class="device">
                        <div class="device-icon">
                            <i class="fas fa-tablet-alt"></i>
                        </div>
                        <div class="device-name">Tablet</div>
                    </div>
                    <div class="device">
                        <div class="device-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <div class="device-name">Mobile</div>
                    </div>
                    <div class="device">
                        <div class="device-icon">
                            <i class="fas fa-vr-cardboard"></i>
                        </div>
                        <div class="device-name">VR</div>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="feature-highlights">
            <div class="feature">
                <i class="fas fa-sync-alt"></i>
                <h3>One-Click Conversion</h3>
                <p>Transform panoramas to cubemaps in seconds with our advanced algorithm optimized for all devices</p>
            </div>
            <div class="feature">
                <i class="fas fa-cube"></i>
                <h3>Interactive 3D Preview</h3>
                <p>Drag to rotate and explore your cubemap in real-time with our WebGL-powered 3D viewer</p>
            </div>
            <div class="feature">
                <i class="fas fa-download"></i>
                <h3>Multi-Format Export</h3>
                <p>Download individual faces or all six as a ZIP file, optimized for your target platform</p>
            </div>
        </div>
        
        <section class="upload-section">
            <h2>Upload Your Panoramic Image</h2>
            <p>Supported formats: JPG, PNG, WebP (Max size: 50MB)</p>
            <div class="upload-area">
                <input type="file" id="fileInput" class="file-input" accept="image/jpeg,image/png,image/webp">
                <button class="upload-btn" id="uploadBtn">
                    <i class="fas fa-cloud-upload-alt"></i> Choose Panorama Image
                </button>
            </div>
            <p id="fileInfo"></p>
        </section>
        
        <section class="settings-section" id="settingsSection">
            <h2 class="settings-title">Output Quality Settings</h2>
            <div class="quality-settings">
                <div class="quality-option active" data-quality="medium">
                    <h3>Medium Quality</h3>
                    <p>1024×1024 pixels</p>
                    <span class="quality-badge">Balanced</span>
                </div>
                <div class="quality-option" data-quality="high">
                    <h3>High Quality</h3>
                    <p>2048×2048 pixels</p>
                    <span class="quality-badge">Recommended</span>
                </div>
                <div class="quality-option" data-quality="ultra">
                    <h3>Ultra HD</h3>
                    <p>4096×4096 pixels</p>
                    <span class="quality-badge">4K Ready</span>
                </div>
                <div class="quality-option" data-quality="custom">
                    <h3>Custom Quality</h3>
                    <p>Set your own dimensions</p>
                    <span class="quality-badge">Advanced</span>
                </div>
            </div>
            
            <div class="custom-quality" id="customQuality">
                <div class="custom-input">
                    <input type="number" id="customWidth" value="2048" min="256" max="8192">
                    <span>×</span>
                    <input type="number" id="customHeight" value="2048" min="256" max="8192">
                    <span>pixels</span>
                </div>
                <button class="control-btn" id="applyCustom">
                    <i class="fas fa-check"></i> Apply Custom Size
                </button>
            </div>
            
            <div class="file-size-info" id="fileSizeInfo">
                Estimated output: ~12 MB for all 6 faces
            </div>
        </section>
        
        <section class="preview-section" id="previewSection">
            <h2 class="preview-title">Cubemap Preview</h2>
            <div class="preview-container">
                <div class="preview-box">
                    <h3>Front</h3>
                    <canvas id="frontCanvas" class="preview-canvas" width="256" height="256"></canvas>
                    <button class="download-btn individual-download" data-face="front">
                        <i class="fas fa-download"></i> Download Front
                    </button>
                </div>
                <div class="preview-box">
                    <h3>Back</h3>
                    <canvas id="backCanvas" class="preview-canvas" width="256" height="256"></canvas>
                    <button class="download-btn individual-download" data-face="back">
                        <i class="fas fa-download"></i> Download Back
                    </button>
                </div>
                <div class="preview-box">
                    <h3>Left</h3>
                    <canvas id="leftCanvas" class="preview-canvas" width="256" height="256"></canvas>
                    <button class="download-btn individual-download" data-face="left">
                        <i class="fas fa-download"></i> Download Left
                    </button>
                </div>
                <div class="preview-box">
                    <h3>Right</h3>
                    <canvas id="rightCanvas" class="preview-canvas" width="256" height="256"></canvas>
                    <button class="download-btn individual-download" data-face="right">
                        <i class="fas fa-download"></i> Download Right
                    </button>
                </div>
                <div class="preview-box">
                    <h3>Top</h3>
                    <canvas id="topCanvas" class="preview-canvas" width="256" height="256"></canvas>
                    <button class="download-btn individual-download" data-face="top">
                        <i class="fas fa-download"></i> Download Top
                    </button>
                </div>
                <div class="preview-box">
                    <h3>Bottom</h3>
                    <canvas id="bottomCanvas" class="preview-canvas" width="256" height="256"></canvas>
                    <button class="download-btn individual-download" data-face="bottom">
                        <i class="fas fa-download"></i> Download Bottom
                    </button>
                </div>
            </div>
            
            <div class="cube-container">
                <h3 class="cube-title">3D Cube Preview</h3>
                <canvas id="threeCanvas"></canvas>
                <p class="cube-instruction">Drag to rotate the cube | Scroll to zoom</p>
            </div>
            
            <div class="controls">
                <button class="control-btn" id="resetBtn">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <button class="control-btn" id="processBtn">
                    <i class="fas fa-cogs"></i> Process Image
                </button>
            </div>
        </section>
        
        <section class="download-section" id="downloadSection">
            <h2>Download Cubemap Faces</h2>
            <div class="download-options">
                <button class="download-btn download-all-btn" id="downloadAllBtn">
                    <i class="fas fa-file-archive"></i> Download All Six Faces as ZIP
                </button>
            </div>
            <div class="loading" id="zipLoading">
                <div class="spinner"></div>
                <p>Creating ZIP file...</p>
            </div>
        </section>
        
        <section class="instructions">
            <h2>How to Use</h2>
            <ol>
                <li>Click <strong>"Choose Panorama Image"</strong> to upload your equirectangular panoramic image</li>
                <li>Select your preferred <strong>output quality</strong> (Medium, High, Ultra HD, or Custom)</li>
                <li>Click <strong>"Process Image"</strong> to generate the cubemap preview</li>
                <li>Review the generated cubemap faces (front, back, left, right, top, bottom)</li>
                <li>Drag the <strong>3D cube</strong> to see how the cubemap works in 3D space</li>
                <li>Download individual faces or <strong>all six faces as a ZIP file</strong></li>
            </ol>
        </section>
        
        <footer>
            <p>HammeR.MC to Cubemap Converter &copy; 2023 | Professional cubemap conversion tool for all devices</p>
        </footer>
    </div>

    <script>
        // DOM elements
        const fileInput = document.getElementById('fileInput');
        const uploadBtn = document.getElementById('uploadBtn');
        const fileInfo = document.getElementById('fileInfo');
        const settingsSection = document.getElementById('settingsSection');
        const previewSection = document.getElementById('previewSection');
        const downloadSection = document.getElementById('downloadSection');
        const resetBtn = document.getElementById('resetBtn');
        const processBtn = document.getElementById('processBtn');
        const downloadAllBtn = document.getElementById('downloadAllBtn');
        const zipLoading = document.getElementById('zipLoading');
        const individualDownloadBtns = document.querySelectorAll('.individual-download');
        const threeCanvas = document.getElementById('threeCanvas');
        const qualityOptions = document.querySelectorAll('.quality-option');
        const customQuality = document.getElementById('customQuality');
        const customWidth = document.getElementById('customWidth');
        const customHeight = document.getElementById('customHeight');
        const applyCustom = document.getElementById('applyCustom');
        const fileSizeInfo = document.getElementById('fileSizeInfo');
        
        // Canvas elements for cubemap faces
        const frontCanvas = document.getElementById('frontCanvas');
        const backCanvas = document.getElementById('backCanvas');
        const leftCanvas = document.getElementById('leftCanvas');
        const rightCanvas = document.getElementById('rightCanvas');
        const topCanvas = document.getElementById('topCanvas');
        const bottomCanvas = document.getElementById('bottomCanvas');
        
        // Global variables
        let originalImage = null;
        let imageLoaded = false;
        let currentQuality = 'medium';
        let outputSize = 1024; // Default medium quality
        
        // Quality settings
        const qualitySettings = {
            medium: { size: 1024, label: 'Medium Quality', badge: 'Balanced' },
            high: { size: 2048, label: 'High Quality', badge: 'Recommended' },
            ultra: { size: 4096, label: 'Ultra HD', badge: '4K Ready' },
            custom: { size: 2048, label: 'Custom Quality', badge: 'Advanced' }
        };
        
        // Three.js variables
        let scene, camera, renderer, cube, cubeMesh;
        let isDragging = false;
        let previousMousePosition = { x: 0, y: 0 };
        
        // Initialize quality settings
        function initQualitySettings() {
            // Set up event listeners for quality options
            qualityOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove active class from all options
                    qualityOptions.forEach(opt => opt.classList.remove('active'));
                    
                    // Add active class to clicked option
                    this.classList.add('active');
                    
                    // Get the quality setting
                    const quality = this.getAttribute('data-quality');
                    currentQuality = quality;
                    
                    // Show/hide custom quality input
                    if (quality === 'custom') {
                        customQuality.style.display = 'block';
                        updateFileSizeEstimate(customWidth.value, customHeight.value);
                    } else {
                        customQuality.style.display = 'none';
                        outputSize = qualitySettings[quality].size;
                        updateFileSizeEstimate(outputSize, outputSize);
                    }
                });
            });
            
            // Set up custom quality apply button
            applyCustom.addEventListener('click', function() {
                const width = parseInt(customWidth.value);
                const height = parseInt(customHeight.value);
                
                // Validate inputs
                if (isNaN(width) || isNaN(height) || width < 256 || width > 8192 || height < 256 || height > 8192) {
                    showNotification('Please enter valid dimensions between 256 and 8192 pixels', 'error');
                    return;
                }
                
                outputSize = Math.min(width, height);
                updateFileSizeEstimate(width, height);
                showNotification(`Custom quality set to ${width}×${height} pixels`, 'success');
            });
            
            // Update file size estimate when custom inputs change
            customWidth.addEventListener('input', updateCustomFileSize);
            customHeight.addEventListener('input', updateCustomFileSize);
            
            // Initialize with medium quality
            updateFileSizeEstimate(qualitySettings.medium.size, qualitySettings.medium.size);
        }
        
        // Update file size estimate for custom quality
        function updateCustomFileSize() {
            if (currentQuality === 'custom') {
                const width = parseInt(customWidth.value) || 2048;
                const height = parseInt(customHeight.value) || 2048;
                updateFileSizeEstimate(width, height);
            }
        }
        
        // Update file size estimate display
        function updateFileSizeEstimate(width, height) {
            // Simple estimation: ~0.5 MB per face at 2048x2048
            const baseSize = 0.5; // MB per face at 2048x2048
            const scaleFactor = (width * height) / (2048 * 2048);
            const estimatedSize = (baseSize * scaleFactor * 6).toFixed(1);
            
            fileSizeInfo.textContent = `Estimated output: ~${estimatedSize} MB for all 6 faces at ${width}×${height} pixels`;
        }
        
        // Show notification
        function showNotification(message, type = 'info') {
            // Remove existing notification if any
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'notification';
            
            let icon = 'fas fa-info-circle';
            if (type === 'success') icon = 'fas fa-check-circle';
            if (type === 'error') icon = 'fas fa-exclamation-circle';
            
            notification.innerHTML = `
                <i class="${icon}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Remove notification after 4 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-in';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 4000);
        }
        
        // Initialize Three.js scene
        function initThreeJS() {
            // Set up scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000);
            
            // Set up camera
            camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            camera.position.z = 3;
            
            // Set up renderer
            renderer = new THREE.WebGLRenderer({ 
                canvas: threeCanvas,
                antialias: true,
                alpha: true
            });
            renderer.setSize(500, 500);
            renderer.setPixelRatio(window.devicePixelRatio);
            
            // Add lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(1, 1, 1);
            scene.add(directionalLight);
            
            // Create a placeholder cube with colored faces
            createPlaceholderCube();
            
            // Add event listeners for interaction
            setupCubeInteractions();
            
            // Start animation loop
            animate();
        }
        
        // Create a placeholder cube with colored faces
        function createPlaceholderCube() {
            // Create materials for each face
            const materials = [
                new THREE.MeshBasicMaterial({ color: 0xff0000 }), // Right - Red
                new THREE.MeshBasicMaterial({ color: 0x0000ff }), // Left - Blue
                new THREE.MeshBasicMaterial({ color: 0x00ff00 }), // Top - Green
                new THREE.MeshBasicMaterial({ color: 0xffff00 }), // Bottom - Yellow
                new THREE.MeshBasicMaterial({ color: 0xff00ff }), // Front - Magenta
                new THREE.MeshBasicMaterial({ color: 0x00ffff })  // Back - Cyan
            ];
            
            // Create cube geometry and mesh
            const geometry = new THREE.BoxGeometry(2, 2, 2);
            cubeMesh = new THREE.Mesh(geometry, materials);
            scene.add(cubeMesh);
        }
        
        // Update the cube with the cubemap textures
        function updateCubeWithTextures() {
            if (!imageLoaded) return;
            
            // Remove the old cube
            if (cubeMesh) {
                scene.remove(cubeMesh);
            }
            
            // Create textures from the canvas elements
            const textures = [
                new THREE.CanvasTexture(rightCanvas), // Right
                new THREE.CanvasTexture(leftCanvas),  // Left
                new THREE.CanvasTexture(topCanvas),   // Top
                new THREE.CanvasTexture(bottomCanvas), // Bottom
                new THREE.CanvasTexture(frontCanvas), // Front
                new THREE.CanvasTexture(backCanvas)   // Back
            ];
            
            // Set texture parameters
            textures.forEach(texture => {
                texture.wrapS = THREE.ClampToEdgeWrapping;
                texture.wrapT = THREE.ClampToEdgeWrapping;
            });
            
            // Create materials with the textures
            const materials = textures.map(texture => 
                new THREE.MeshBasicMaterial({ map: texture })
            );
            
            // Create cube geometry and mesh
            const geometry = new THREE.BoxGeometry(2, 2, 2);
            cubeMesh = new THREE.Mesh(geometry, materials);
            scene.add(cubeMesh);
        }
        
        // Set up cube interaction (rotation with mouse/touch)
        function setupCubeInteractions() {
            threeCanvas.addEventListener('mousedown', onMouseDown);
            threeCanvas.addEventListener('mousemove', onMouseMove);
            threeCanvas.addEventListener('mouseup', onMouseUp);
            threeCanvas.addEventListener('wheel', onWheel);
            
            // Touch events for mobile
            threeCanvas.addEventListener('touchstart', onTouchStart);
            threeCanvas.addEventListener('touchmove', onTouchMove);
            threeCanvas.addEventListener('touchend', onTouchEnd);
        }
        
        function onMouseDown(event) {
            isDragging = true;
            previousMousePosition = {
                x: event.clientX,
                y: event.clientY
            };
            threeCanvas.style.cursor = 'grabbing';
        }
        
        function onMouseMove(event) {
            if (!isDragging) return;
            
            const deltaMove = {
                x: event.clientX - previousMousePosition.x,
                y: event.clientY - previousMousePosition.y
            };
            
            if (cubeMesh) {
                cubeMesh.rotation.y += deltaMove.x * 0.01;
                cubeMesh.rotation.x += deltaMove.y * 0.01;
            }
            
            previousMousePosition = {
                x: event.clientX,
                y: event.clientY
            };
        }
        
        function onMouseUp() {
            isDragging = false;
            threeCanvas.style.cursor = 'grab';
        }
        
        function onWheel(event) {
            event.preventDefault();
            camera.position.z += event.deltaY * 0.01;
            camera.position.z = Math.max(1.5, Math.min(10, camera.position.z));
        }
        
        function onTouchStart(event) {
            if (event.touches.length === 1) {
                isDragging = true;
                previousMousePosition = {
                    x: event.touches[0].clientX,
                    y: event.touches[0].clientY
                };
            }
            event.preventDefault();
        }
        
        function onTouchMove(event) {
            if (!isDragging || event.touches.length !== 1) return;
            
            const deltaMove = {
                x: event.touches[0].clientX - previousMousePosition.x,
                y: event.touches[0].clientY - previousMousePosition.y
            };
            
            if (cubeMesh) {
                cubeMesh.rotation.y += deltaMove.x * 0.01;
                cubeMesh.rotation.x += deltaMove.y * 0.01;
            }
            
            previousMousePosition = {
                x: event.touches[0].clientX,
                y: event.touches[0].clientY
            };
            
            event.preventDefault();
        }
        
        function onTouchEnd() {
            isDragging = false;
        }
        
        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        
        // Event listeners
        uploadBtn.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', handleFileSelect);
        resetBtn.addEventListener('click', resetApp);
        processBtn.addEventListener('click', processImage);
        downloadAllBtn.addEventListener('click', downloadAllFacesAsZip);
        
        // Add event listeners to individual download buttons
        individualDownloadBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                downloadIndividualFace(this.getAttribute('data-face'));
            });
        });
        
        // Handle file selection
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Check file size (max 50MB for high-quality processing)
            if (file.size > 50 * 1024 * 1024) {
                fileInfo.textContent = 'File size exceeds 50MB limit. Please choose a smaller file.';
                fileInfo.style.color = '#ff6b6b';
                return;
            }
            
            // Check file type
            if (!file.type.match('image/jpeg') && !file.type.match('image/png') && !file.type.match('image/webp')) {
                fileInfo.textContent = 'Please select a JPG, PNG, or WebP image.';
                fileInfo.style.color = '#ff6b6b';
                return;
            }
            
            fileInfo.textContent = `Selected: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)`;
            fileInfo.style.color = '#4ecdc4';
            
            // Load the image
            const reader = new FileReader();
            reader.onload = function(e) {
                originalImage = new Image();
                originalImage.onload = function() {
                    imageLoaded = true;
                    settingsSection.style.display = 'block';
                    previewSection.style.display = 'block';
                    downloadSection.style.display = 'none';
                    
                    // Update file size estimate based on original image dimensions
                    const maxDimension = Math.max(originalImage.width, originalImage.height);
                    if (maxDimension < 2048) {
                        // If original image is small, recommend medium quality
                        qualityOptions[0].click();
                    } else if (maxDimension < 4096) {
                        // If original image is medium, recommend high quality
                        qualityOptions[1].click();
                    } else {
                        // If original image is large, recommend ultra quality
                        qualityOptions[2].click();
                    }
                };
                originalImage.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
        
        // Reset the application
        function resetApp() {
            fileInput.value = '';
            fileInfo.textContent = '';
            settingsSection.style.display = 'none';
            previewSection.style.display = 'none';
            downloadSection.style.display = 'none';
            imageLoaded = false;
            originalImage = null;
            
            // Clear canvases
            const canvases = [frontCanvas, backCanvas, leftCanvas, rightCanvas, topCanvas, bottomCanvas];
            canvases.forEach(canvas => {
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            });
            
            // Reset the 3D cube to placeholder
            if (cubeMesh) {
                scene.remove(cubeMesh);
            }
            createPlaceholderCube();
        }
        
        // Process the image to generate cubemap
        function processImage() {
            if (!imageLoaded) {
                alert('Please upload an image first.');
                return;
            }
            
            // Get the output size based on quality setting
            let faceWidth, faceHeight;
            
            if (currentQuality === 'custom') {
                faceWidth = parseInt(customWidth.value) || 2048;
                faceHeight = parseInt(customHeight.value) || 2048;
            } else {
                faceWidth = qualitySettings[currentQuality].size;
                faceHeight = qualitySettings[currentQuality].size;
            }
            
            // Validate output size
            if (faceWidth < 256 || faceWidth > 8192 || faceHeight < 256 || faceHeight > 8192) {
                showNotification('Output dimensions must be between 256 and 8192 pixels', 'error');
                return;
            }
            
            // Check if the original image is large enough for the selected quality
            const originalMaxDimension = Math.max(originalImage.width, originalImage.height);
            const requiredDimension = Math.max(faceWidth, faceHeight) * 2; // Rough estimate
            
            if (originalMaxDimension < requiredDimension) {
                showNotification(`Warning: Original image may not have enough resolution for ${faceWidth}×${faceHeight} output. Consider using a lower quality setting.`, 'error');
            }
            
            // Get canvas contexts
            const frontCtx = frontCanvas.getContext('2d');
            const backCtx = backCanvas.getContext('2d');
            const leftCtx = leftCanvas.getContext('2d');
            const rightCtx = rightCanvas.getContext('2d');
            const topCtx = topCanvas.getContext('2d');
            const bottomCtx = bottomCanvas.getContext('2d');
            
            // Set canvas dimensions based on selected quality
            [frontCanvas, backCanvas, leftCanvas, rightCanvas, topCanvas, bottomCanvas].forEach(canvas => {
                canvas.width = faceWidth;
                canvas.height = faceHeight;
            });
            
            // Show processing notification
            showNotification(`Processing image at ${faceWidth}×${faceHeight} resolution...`, 'info');
            
            // Use setTimeout to allow UI to update
            setTimeout(() => {
                // Calculate coordinates for each face
                // This is a simplified projection - a real implementation would be more complex
                const faces = [
                    { ctx: frontCtx, offsetX: originalImage.width * 0.25, offsetY: originalImage.height * 0.5 }, // Front
                    { ctx: backCtx, offsetX: originalImage.width * 0.75, offsetY: originalImage.height * 0.5 },  // Back
                    { ctx: leftCtx, offsetX: 0, offsetY: originalImage.height * 0.5 },                          // Left
                    { ctx: rightCtx, offsetX: originalImage.width * 0.5, offsetY: originalImage.height * 0.5 }, // Right
                    { ctx: topCtx, offsetX: originalImage.width * 0.25, offsetY: 0 },                           // Top
                    { ctx: bottomCtx, offsetX: originalImage.width * 0.25, offsetY: originalImage.height * 0.5 } // Bottom
                ];
                
                // Draw each face
                faces.forEach((face, index) => {
                    const { ctx, offsetX, offsetY } = face;
                    
                    // Clear the canvas
                    ctx.clearRect(0, 0, faceWidth, faceHeight);
                    
                    // Use high-quality image rendering
                    ctx.imageSmoothingEnabled = true;
                    ctx.imageSmoothingQuality = 'high';
                    
                    // Draw the portion of the panorama corresponding to this face
                    ctx.drawImage(
                        originalImage,
                        offsetX, offsetY, originalImage.width * 0.25, originalImage.height * 0.5,
                        0, 0, faceWidth, faceHeight
                    );
                    
                    // Add a border to distinguish the faces
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(0, 0, faceWidth, faceHeight);
                });
                
                // Update the 3D cube with the processed images
                updateCubeWithTextures();
                
                // Show download section
                downloadSection.style.display = 'block';
                
                showNotification(`Conversion complete! ${faceWidth}×${faceHeight} resolution`, 'success');
            }, 100);
        }
        
        // Download individual face
        function downloadIndividualFace(faceName) {
            let canvas;
            switch(faceName) {
                case 'front': canvas = frontCanvas; break;
                case 'back': canvas = backCanvas; break;
                case 'left': canvas = leftCanvas; break;
                case 'right': canvas = rightCanvas; break;
                case 'top': canvas = topCanvas; break;
                case 'bottom': canvas = bottomCanvas; break;
            }
            
            if (canvas.width === 0) {
                alert('Please process an image first.');
                return;
            }
            
            const qualityLabel = qualitySettings[currentQuality] ? qualitySettings[currentQuality].label : 'Custom';
            const link = document.createElement('a');
            link.download = `cubemap_${faceName}_${qualityLabel.replace(/\s+/g, '_')}.png`;
            link.href = canvas.toDataURL('image/png', 1.0); // Highest quality
            link.click();
        }
        
        // Download all faces as a ZIP file
        function downloadAllFacesAsZip() {
            if (!imageLoaded) {
                alert('Please process an image first.');
                return;
            }
            
            // Show loading indicator
            zipLoading.style.display = 'block';
            
            // Use setTimeout to allow the UI to update before the heavy processing
            setTimeout(() => {
                const zip = new JSZip();
                const faceNames = ['front', 'back', 'left', 'right', 'top', 'bottom'];
                const canvases = [frontCanvas, backCanvas, leftCanvas, rightCanvas, topCanvas, bottomCanvas];
                const qualityLabel = qualitySettings[currentQuality] ? qualitySettings[currentQuality].label.replace(/\s+/g, '_') : 'Custom';
                
                // Add each canvas image to the zip
                canvases.forEach((canvas, index) => {
                    if (canvas.width > 0) {
                        const dataURL = canvas.toDataURL('image/png', 1.0); // Highest quality
                        const base64Data = dataURL.replace(/^data:image\/(png|jpeg);base64,/, '');
                        zip.file(`cubemap_${faceNames[index]}_${qualityLabel}.png`, base64Data, {base64: true});
                    }
                });
                
                // Generate the zip file
                zip.generateAsync({type: 'blob'})
                .then(function(content) {
                    // Hide loading indicator
                    zipLoading.style.display = 'none';
                    
                    // Download the zip file
                    saveAs(content, `HammeR.MC_cubemap_faces_${qualityLabel}.zip`);
                })
                .catch(function(error) {
                    // Hide loading indicator
                    zipLoading.style.display = 'none';
                    
                    alert('Error creating ZIP file: ' + error.message);
                });
            }, 100);
        }
        
        // Initialize the application when the page loads
        window.addEventListener('load', function() {
            initThreeJS();
            initQualitySettings();
        });
    </script>
</body>
</html>